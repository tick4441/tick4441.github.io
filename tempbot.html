<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot</title>
    <script src="responses.js"></script> <!-- Load chatbot responses -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f0f0; flex-direction: column; }
        .credit { text-align: center; font-size: 14px; padding: 10px; color: #555; }
        .credit a { color: #007bff; text-decoration: none; }
        .credit a:hover { text-decoration: underline; }
        .chatbot-container { width: 100%; height: 100%; display: flex; flex-direction: column; background-color: #fff; }
        #header { background-color: #5d6d6d; color: #ffffff; padding: 20px; text-align: center; font-size: 1.2em; font-weight: bold; }
        #chatbot { flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; background-color: #47788b; border: 1px solid #000000; padding: 10px; overflow: hidden; }
        #conversation { flex-grow: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; }
        .chatbot-message { display: flex; align-items: flex-start; font-size: 16px; line-height: 20px; border-radius: 20px; word-wrap: break-word; white-space: pre-wrap; max-width: 80%; padding: 10px; margin: 5px 0; }
        .chatbot { background-color: rgb(234, 237, 238); color: #000000; align-self: flex-start; }
        .user-message { background-color: #9aa171; color: #fff; align-self: flex-end; }
        #input-form { display: flex; align-items: center; border-top: 1px solid #196bd6; padding: 10px; background: #e9dce6; }
        #input-field { flex: 1; height: 40px; border: none; border-radius: 4px; padding: 0 10px; font-size: 14px; background: #fff; color: #000; outline: none; }
        .send-icon { width: 24px; height: 24px; }
    </style>
</head>
<body>
    <div class="credit">
        Credit to <a href="https://github.com/hegdepavankumar/Basic-Chatbot-using-HTML-CSS-and-JavaScript" target="_blank">hegdepavankumar</a> for this simple chatbot template! View the original code <a href="https://github.com/hegdepavankumar/Basic-Chatbot-using-HTML-CSS-and-JavaScript" target="_blank">here</a>.
    </div>

    <div class="chatbot-container">
        <div id="header">BananaBTP Chatbot</div>
        <div id="chatbot">
            <div id="conversation">
                <div class="chatbot-message chatbot">
                    <p class="chatbot-text">Hi! I'm your chatbot ðŸ‘‹ It's great to see you!</p>
                </div>
            </div>
            <form id="input-form">
                <input id="input-field" type="text" placeholder="Type your message here">
                <button id="submit-button" type="submit">
                    <img class="send-icon" src="send-message.png" alt="Send">
                </button>
            </form>
        </div>
    </div>

    <script>
        const chatbot = document.getElementById('chatbot');
        const conversation = document.getElementById('conversation');
        const inputForm = document.getElementById('input-form');
        const inputField = document.getElementById('input-field');

        inputForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const input = inputField.value.trim().toLowerCase();
            if (input === '') return;
            inputField.value = '';
            const currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: "2-digit" });

            let message = document.createElement('div');
            message.classList.add('chatbot-message', 'user-message');
            message.innerHTML = `<p class="chatbot-text" sentTime="${currentTime}">${input}</p>`;
            conversation.appendChild(message);

            const response = generateResponse(input);
            message = document.createElement('div');
            message.classList.add('chatbot-message', 'chatbot');
            message.innerHTML = `<p class="chatbot-text" sentTime="${currentTime}">${response}</p>`;
            conversation.appendChild(message);
            message.scrollIntoView({behavior: "smooth"});
        });

        function generateResponse(input) {
            for (let key in responses) {
                if (input.includes(key)) {
                    return responses[key][Math.floor(Math.random() * responses[key].length)];
                }
            }
            return "I'm not sure how to answer that. Can you ask me something else? ðŸ¤”";
        }

        window.onblur = function () { 
            alert('You are going away? Please don\'t! WAAAAAAAAAAAAAAAAAAAAAAA');
        };
    </script>
</body>
</html>
